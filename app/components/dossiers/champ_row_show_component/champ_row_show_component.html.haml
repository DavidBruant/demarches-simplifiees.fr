- each_champ do |champ|
  - if champ.repetition?
    - champ.rows.each.with_index do |row, i|
      .fr-background-alt--grey.fr-p-2w.fr-my-3w.fr-ml-2w.champ-repetition
        %p.font-weight-bold= "#{champ.libelle} #{i + 1} :"

        = render Dossiers::ChampRowShowComponent.new(champs: row, demande_seen_at: @demande_seen_at, profile: @profile, repetition: true)

  - else
    .fr-px-2w.fr-my-2w.champ-row
      %p.champ-label= "#{champ.libelle} :"

      - if champ.blank?
        .champ-content.fr-text-mention--grey{ class: champ.type_champ }
          - if usager?
            %p
              %em= t(blank_key(champ))

      - else
        .champ-content{ class: champ.type_champ }

          - if updated_after_deposer?(champ)
            %p.fr-mb-1v.fr-ml-3v.champ-updated
              %span.fr-badge.fr-badge--sm{ class: badge_class_if_unseen(@demande_seen_at, champ.updated_at) }
                = t(:updated_at, scope: [:views, :shared, :dossiers, :form], datetime: try_format_datetime(champ.updated_at, format: :veryshort))

          - case champ.type_champ
          - when TypeDeChamp.type_champs.fetch(:carte)
            = render partial: "shared/champs/carte/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:dossier_link)
            = render partial: "shared/champs/dossier_link/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:multiple_drop_down_list)
            = render partial: "shared/champs/multiple_drop_down_list/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:piece_justificative), TypeDeChamp.type_champs.fetch(:titre_identite)
            = render partial: "shared/champs/piece_justificative/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:siret)
            = render partial: "shared/champs/siret/show", locals: { champ: champ, profile: @profile }
          - when TypeDeChamp.type_champs.fetch(:iban)
            = render partial: "shared/champs/iban/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:textarea)
            = render partial: "shared/champs/textarea/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:annuaire_education)
            = render partial: "shared/champs/annuaire_education/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:cnaf)
            = render partial: "shared/champs/cnaf/show", locals: { champ: champ, profile: @profile }
          - when TypeDeChamp.type_champs.fetch(:dgfip)
            = render partial: "shared/champs/dgfip/show", locals: { champ: champ, profile: @profile }
          - when TypeDeChamp.type_champs.fetch(:pole_emploi)
            = render partial: "shared/champs/pole_emploi/show", locals: { champ: champ, profile: @profile }
          - when TypeDeChamp.type_champs.fetch(:mesri)
            = render partial: "shared/champs/mesri/show", locals: { champ: champ, profile: @profile }
          - when TypeDeChamp.type_champs.fetch(:address)
            = render partial: "shared/champs/address/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:communes)
            = render partial: "shared/champs/communes/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:regions)
            = render partial: "shared/champs/regions/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:rna)
            = render partial: "shared/champs/rna/show", locals: { champ: champ, profile: @profile }
          - when TypeDeChamp.type_champs.fetch(:epci)
            = render partial: "shared/champs/epci/show", locals: { champ: champ }
          - when TypeDeChamp.type_champs.fetch(:date)
            %p= champ.to_s
          - when TypeDeChamp.type_champs.fetch(:datetime)
            %p= champ.to_s
          - when TypeDeChamp.type_champs.fetch(:number), TypeDeChamp.type_champs.fetch(:integer_number), TypeDeChamp.type_champs.fetch(:decimal_number)
            %p= number_with_html_delimiter(champ.to_s)
          - else
            = format_text_value(champ.to_s.strip) # format already wrap in p

